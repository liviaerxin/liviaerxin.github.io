"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1178],{28453:(e,i,s)=>{s.d(i,{R:()=>r,x:()=>o});var n=s(96540);const t={},l=n.createContext(t);function r(e){const i=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),n.createElement(l.Provider,{value:i},e.children)}},89437:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"practice/git-best-practices","title":"Git Best Practices","description":"Git Submodules","source":"@site/../../docs/practice/git-best-practices.md","sourceDirName":"practice","slug":"/practice/git-best-practices","permalink":"/docs/practice/git-best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/liviaerxin/liviaerxin.github.io/edit/master/_ssg/docusaurus/../../docs/practice/git-best-practices.md","tags":[{"inline":true,"label":"git","permalink":"/docs/tags/git"},{"inline":true,"label":"git submodules","permalink":"/docs/tags/git-submodules"},{"inline":true,"label":"best practice","permalink":"/docs/tags/best-practice"}],"version":"current","lastUpdatedBy":"liviaerxin","lastUpdatedAt":1745091602000,"frontMatter":{"foam_template":{"name":"Blog Docusaurus Template","description":"Creates Docusaurus blog/slip","filepath":"blog/git-submodules.md"},"authors":["frank"],"tags":["git","git submodules","best practice"],"description":"Git Submodules","keywords":["Git Submodules"],"image":"https://i.imgur.com/mErPwqL.png","date":"2024-08-02T00:00:00.000Z","draft":false,"enableComments":true},"sidebar":"docs","previous":{"title":"Lock Http Request","permalink":"/docs/practice/fastapi-best-practices"},"next":{"title":"Your markdown including PlantUML code block","permalink":"/docs/practice/markdown-plantuml"}}');var t=s(74848),l=s(28453);const r={foam_template:{name:"Blog Docusaurus Template",description:"Creates Docusaurus blog/slip",filepath:"blog/git-submodules.md"},authors:["frank"],tags:["git","git submodules","best practice"],description:"Git Submodules",keywords:["Git Submodules"],image:"https://i.imgur.com/mErPwqL.png",date:new Date("2024-08-02T00:00:00.000Z"),draft:!1,enableComments:!0},o="Git Best Practices",c={},d=[{value:"Git SSH key",id:"git-ssh-key",level:2},{value:"Git credential",id:"git-credential",level:2},{value:"Git submodule",id:"git-submodule",level:2},{value:"Discard local commits",id:"discard-local-commits",level:2},{value:"Create a subdirectory inside Git and use it as Git submodule",id:"create-a-subdirectory-inside-git-and-use-it-as-git-submodule",level:2},{value:"Carve out a subdirectory from Git and use it as Git submodule",id:"carve-out-a-subdirectory-from-git-and-use-it-as-git-submodule",level:2},{value:"Git subtree",id:"git-subtree",level:2}];function a(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"git-best-practices",children:"Git Best Practices"})}),"\n",(0,t.jsx)(i.p,{children:"Global configuration"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git config --global --list\ngit config --local --list\n"})}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"GIT"})," two popular authentication methods: ",(0,t.jsx)(i.a,{href:"#git-ssh-key",children:"SSH Key"})," and ",(0,t.jsx)(i.a,{href:"#git-credentials",children:"Credentials"})]}),"\n",(0,t.jsx)(i.h2,{id:"git-ssh-key",children:"Git SSH key"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.a,{href:"https://hackernoon.com/how-to-authenticate-your-git-to-github-with-ssh-keys",children:"How to Authenticate Your Git to GitHub with SSH Keys"})}),"\n",(0,t.jsx)(i.h2,{id:"git-credential",children:"Git credential"}),"\n",(0,t.jsx)(i.p,{children:"Store username/password instead of ssh for multiple remotes"}),"\n",(0,t.jsx)(i.p,{children:"To enable git credentials"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"# local\ngit config credential.helper store\n# global\ngit config --global credential.helper store\n"})}),"\n",(0,t.jsxs)(i.p,{children:["Each credential is stored in ",(0,t.jsx)(i.code,{children:"~/.git-credentials"})," file on its own line as a URL like:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"https://<USERNAME>:<PASSWORD>@github.com\n"})}),"\n",(0,t.jsx)(i.p,{children:"Configure credentials,"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"# Global\ngit config --global credential.https://github.com.username <your_username>\n\n# Or \ngit config --local user.name <your_username>\ngit config --local user.email <your_useremail>\n# Then git pull or git push to let it cache your username/password after it prompt you to input password in the first time\n"})}),"\n",(0,t.jsxs)(i.p,{children:["Alternatively, we can directly edit our global Git config file ",(0,t.jsx)(i.code,{children:"~/.gitconfig"}),","]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:'[credential "https://github.com"]\n\tusername = <username>\n'})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.a,{href:"https://www.shellhacks.com/git-config-username-password-store-credentials/",children:"Git - Config Username & Password - Store Credentials - ShellHacks"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.a,{href:"https://www.baeldung.com/ops/git-configure-credentials",children:"Configuring Git Credentials"})}),"\n",(0,t.jsx)(i.h2,{id:"git-submodule",children:"Git submodule"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Pull the repo and its all submodules in ",(0,t.jsx)(i.strong,{children:"the first time"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git clone http://10.6.64.66:30000/mtr/mtr.git\n\ncd mtr\n\ngit submodule update --init --recursive --progress\n"})}),"\n",(0,t.jsx)(i.p,{children:"Or just one command to clone with all the submodules."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git clone --recursive http://10.6.64.66:30000/mtr/mtr.git\n"})}),"\n",(0,t.jsxs)(i.ol,{start:"2",children:["\n",(0,t.jsx)(i.li,{children:"Pull the repo and its all submodules later"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git submodule update --recursive --progress\n"})}),"\n",(0,t.jsxs)(i.ol,{start:"3",children:["\n",(0,t.jsxs)(i.li,{children:["Enter each sub repository to pull its own latest of ",(0,t.jsx)(i.code,{children:"main"})," per repository, when the parent repo does point to the latest branch of its submodules!"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Sometimes, it is very annoying to keep the parent repository up to date on the latest reference of its every sub repository!\nThis approach give you the flexibility while being like a shortcut."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git submodule foreach git checkout main\n"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git submodule foreach git pull\n"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git submodule foreach git pull origin main\n"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git submodule update --recursive --remote\n"})}),"\n",(0,t.jsx)(i.h2,{id:"discard-local-commits",children:"Discard local commits"}),"\n",(0,t.jsxs)(i.p,{children:["Assume your local repo has 10 commits ahead of the ",(0,t.jsx)(i.code,{children:"origin/main"}),", and you want to move back to the ",(0,t.jsx)(i.code,{children:"origin/main"}),"."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git reset --hard origin/main\n"})}),"\n",(0,t.jsx)(i.h2,{id:"create-a-subdirectory-inside-git-and-use-it-as-git-submodule",children:"Create a subdirectory inside Git and use it as Git submodule"}),"\n",(0,t.jsxs)(i.p,{children:["First, create a subdirectory ",(0,t.jsx)(i.code,{children:"./include/private"})," and initialize it as a new Git repository inside Git repo, then push it to remote."]}),"\n",(0,t.jsxs)(i.p,{children:["Once done, we'll have subdirectory ",(0,t.jsx)(i.code,{children:"./include/private"})," which has been gitted."]}),"\n",(0,t.jsxs)(i.p,{children:["Check current parent Git submodule, and our ",(0,t.jsx)(i.code,{children:"./include/private"})," sit outside."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"$ git submodule\n-96788d8ac53a815778a8cfd19addb3590a8be5ea code-snippets/assembly\n-990e3db80c61c64ba9097adb7e729a6568c272ec code-snippets/c\n-dd2097c0884363948877dea2b3f68efb90e6d204 code-snippets/cpp\n-a4c753b89c423cd02718bece5a8a6302bd2385c7 code-snippets/docker-compose\n-e23cfb82c6fefae4fdc6a144228bebb580bf7c13 code-snippets/python\n"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Option 1, Using ",(0,t.jsx)(i.code,{children:"git submodule add"})," command in ",(0,t.jsx)(i.strong,{children:"parent"})," directory(note: works even ",(0,t.jsx)(i.code,{children:"./include/private"})," folder exists):"]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git submodule add https://github.com/liviaerxin/private.git include/private\n"})}),"\n",(0,t.jsx)(i.p,{children:"Finally, commit,"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:'git commit -m "add submodule private"\n'})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Option 2, Editing ",(0,t.jsx)(i.code,{children:".gitmodules"})," file in ",(0,t.jsx)(i.strong,{children:"parent"})," directory by adding:"]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",metastring:'title=".gitmodules"',children:'[submodule "include/private"]\n\tpath = include/private\n\turl = https://github.com/liviaerxin/private.git\n'})}),"\n",(0,t.jsx)(i.p,{children:"Indexing the submodule,"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"git add include/private\n"})}),"\n",(0,t.jsx)(i.p,{children:"Verifying that the submodule has been included,"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:"$ git submodule\n-96788d8ac53a815778a8cfd19addb3590a8be5ea code-snippets/assembly\n-990e3db80c61c64ba9097adb7e729a6568c272ec code-snippets/c\n-dd2097c0884363948877dea2b3f68efb90e6d204 code-snippets/cpp\n-a4c753b89c423cd02718bece5a8a6302bd2385c7 code-snippets/docker-compose\n-e23cfb82c6fefae4fdc6a144228bebb580bf7c13 code-snippets/python\n-e9e1b5f114e5da1896dae6c08ca01bc83b844b4d include/private\n"})}),"\n",(0,t.jsx)(i.p,{children:"For managing the submodule,"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Sync local private file: ",(0,t.jsx)(i.code,{children:".git/config"})," by running ",(0,t.jsx)(i.code,{children:"git submodule init"}),", which will let the submodule update when running ",(0,t.jsx)(i.code,{children:"git submodule update"})," later."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Finally, commit,"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",children:'git commit -m "add submodule private"\n'})}),"\n",(0,t.jsxs)(i.p,{children:["In conclusion, ",(0,t.jsx)(i.code,{children:"git submodule add"})," equals:"]}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Run ",(0,t.jsx)(i.code,{children:"git clone {submodule} include/{submodule}"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Add submodule configuration such as ",(0,t.jsx)(i.code,{children:"path = include/{submodule}"})," and ",(0,t.jsx)(i.code,{children:"url=https://github.com/xxx/{submodule}.git"})," into ",(0,t.jsx)(i.code,{children:".gitmodules"})," file."]}),"\n",(0,t.jsxs)(i.li,{children:["Add the sub folder ",(0,t.jsx)(i.code,{children:"include/{submodule}"}),": ",(0,t.jsx)(i.code,{children:"git add include/{submodule}"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Sync ",(0,t.jsx)(i.code,{children:".git/config"})," file: ",(0,t.jsx)(i.code,{children:"git submodule init"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Sometimes the warning to the changes of submodules will be annoying, especially if you update submodules frequently."}),"\n",(0,t.jsx)(i.p,{children:"To ignore all changes to the submodules:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sh",metastring:'title=".gitmodules"',children:'[submodule "include/private"]\n\tpath = include/private\n\turl = https://github.com/liviaerxin/private.git\n  ignore = all\n'})}),"\n",(0,t.jsx)(i.p,{children:"Once you have ignored changes in a submodule, you will no longer see them in the output of the git status command. You will also not be able to commit or push the changes to the submodule."}),"\n",(0,t.jsx)(i.p,{children:"To view the changes in the submodule, you can use the git submodule summary command. This command will show you a summary of the changes in the submodule, even if they are ignored."}),"\n",(0,t.jsx)(i.p,{children:"Once you have unignored changes in a submodule, you will be able to see them in the output of the git status command and you will be able to commit and push the changes to the submodule."}),"\n",(0,t.jsx)(i.p,{children:"Here are some additional things to keep in mind when ignoring changes in a submodule:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Ignoring changes in a submodule does not prevent you from updating the submodule. You can still use the git submodule update command to update the submodule to the latest version."}),"\n",(0,t.jsx)(i.li,{children:"Ignoring changes in a submodule does not prevent you from cloning the submodule. You can still use the git submodule clone command to clone the submodule into another repository."}),"\n",(0,t.jsx)(i.li,{children:"Ignoring changes in a submodule does not prevent you from deleting the submodule. You can still use the git submodule deinit command to delete the submodule from your repository."}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Overall, ignoring changes in a submodule can be a useful way to keep your repository clean and organized. However, it is important to understand the implications of ignoring changes before you do so."}),"\n",(0,t.jsx)(i.h2,{id:"carve-out-a-subdirectory-from-git-and-use-it-as-git-submodule",children:"Carve out a subdirectory from Git and use it as Git submodule"}),"\n",(0,t.jsx)(i.h2,{id:"git-subtree",children:"Git subtree"}),"\n",(0,t.jsxs)(i.p,{children:["When you should consider using a ",(0,t.jsx)(i.strong,{children:"Git subtree"})," instead of ",(0,t.jsx)(i.strong,{children:"Git submodule"}),"?"]}),"\n",(0,t.jsx)(i.p,{children:"If you need to manage multiple projects within a single repository as:"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"I have a main project for writing blogs"}),"\n",(0,t.jsxs)(i.li,{children:["However, I also manage several projects to maintain my daily coding snippets such as ",(0,t.jsx)(i.code,{children:"C"}),", ",(0,t.jsx)(i.code,{children:"Python"}),", ...etc."]}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["I want to store these ",(0,t.jsx)(i.strong,{children:"sub-projects"})," in the specified sub-folders of my main repository."]}),"\n",(0,t.jsxs)(i.li,{children:["I will update these ",(0,t.jsx)(i.strong,{children:"sub-projects"})," frequently."]}),"\n",(0,t.jsxs)(i.li,{children:["I will pull and push changes of these ",(0,t.jsx)(i.strong,{children:"sub-projects"})," in local sub working directories."]}),"\n",(0,t.jsxs)(i.li,{children:["I don't want to the main repository to warn me the new commits from ",(0,t.jsx)(i.strong,{children:"sub-projects"})," every time I update the ",(0,t.jsx)(i.strong,{children:"sub-projects"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Drawbacks:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["To update and commit changes on these ",(0,t.jsx)(i.strong,{children:"sub-projects"}),' you need to remember some "information", because the metadata of these ',(0,t.jsx)(i.strong,{children:"sub-projects"})," will be not stored in a file like ",(0,t.jsx)(i.code,{children:".gitmodules"})," in main repo."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.a,{href:"https://docs.github.com/en/get-started/using-git/about-git-subtree-merges",children:"About Git subtree merges"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.a,{href:"https://www.atlassian.com/git/tutorials/git-subtree",children:"Git Subtree: Alternative to Git Submodule | Atlassian Git Tutorial"})})]})}function u(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);