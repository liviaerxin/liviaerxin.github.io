"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5559],{4850:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"docker/docker-containers-data-sharing","title":"Share Data between Docker Containers","description":"Docker Containers Data Sharing","source":"@site/../../docs/docker/docker-containers-data-sharing.md","sourceDirName":"docker","slug":"/docker/docker-containers-data-sharing","permalink":"/docs/docker/docker-containers-data-sharing","draft":false,"unlisted":false,"editUrl":"https://github.com/liviaerxin/liviaerxin.github.io/edit/master/docs/../../docs/docker/docker-containers-data-sharing.md","tags":[{"inline":true,"label":"docker","permalink":"/docs/tags/docker"},{"inline":true,"label":"dev-ops","permalink":"/docs/tags/dev-ops"},{"inline":true,"label":"docker-volume","permalink":"/docs/tags/docker-volume"},{"inline":true,"label":"data","permalink":"/docs/tags/data"}],"version":"current","lastUpdatedBy":"liviaerxin","lastUpdatedAt":1746508204000,"frontMatter":{"foam_template":{"name":"Blog Docusaurus Template","description":"Creates Docusaurus blog/slip","filepath":"blog/docker-containers-data-sharing.md"},"authors":["frank"],"tags":["docker","dev-ops","docker-volume","data"],"description":"Docker Containers Data Sharing","keywords":["Docker Containters Data Sharing"],"image":"https://i.imgur.com/mErPwqL.png","date":"2024-07-19T00:00:00.000Z","draft":false,"enableComments":true},"sidebar":"docs","previous":{"title":"Communication Between Docker Containers","permalink":"/docs/docker/docker-containers-communication"},"next":{"title":"Set Up NFS Sever in Docker","permalink":"/docs/docker/docker-setup-nfs-sever"}}');var a=o(74848),r=o(28453);const t={foam_template:{name:"Blog Docusaurus Template",description:"Creates Docusaurus blog/slip",filepath:"blog/docker-containers-data-sharing.md"},authors:["frank"],tags:["docker","dev-ops","docker-volume","data"],description:"Docker Containers Data Sharing",keywords:["Docker Containters Data Sharing"],image:"https://i.imgur.com/mErPwqL.png",date:new Date("2024-07-19T00:00:00.000Z"),draft:!1,enableComments:!0},i="Share Data between Docker Containers",c={},l=[{value:"Use a volume to bind a local folder",id:"use-a-volume-to-bind-a-local-folder",level:2},{value:"Use NFS volume",id:"use-nfs-volume",level:2},{value:"Use Samba volume",id:"use-samba-volume",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"share-data-between-docker-containers",children:"Share Data between Docker Containers"})}),"\n",(0,a.jsx)(n.p,{children:"There are three types of data to manage data in Docker,"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"bind mount"}),"\n",(0,a.jsx)(n.li,{children:"volume mount"}),"\n",(0,a.jsx)(n.li,{children:"tmpfs mount"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:o(95894).A+"",width:"502",height:"255"})}),"\n",(0,a.jsxs)(n.p,{children:["Read ",(0,a.jsx)(n.a,{href:"https://docs.docker.com/storage/",children:"Manage data in Docker"})," for more information, it's a great official documentation!"]}),"\n",(0,a.jsxs)(n.p,{children:["Here, this page demonstrates some use cases in practices that you maybe face. As the official documentation says, ",(0,a.jsx)(n.strong,{children:"Volume"})," is alway the first choice and preferred mechanism for persisting and sharing data between containers, as one of the biggest advantages is that ",(0,a.jsx)(n.strong,{children:"volume"})," is thoroughly managed by Docker. That means:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["You can manage ",(0,a.jsx)(n.strong,{children:"volume"})," using Docker CLI commands ir the Docker API."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Volume"})," is easier to back up and migrate than ",(0,a.jsx)(n.strong,{children:"bind mounts"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Volume"})," work the same interface in Linux and Windows, such as no need to worry about ",(0,a.jsx)(n.code,{children:"POSIX"})," file path style in Windows."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Volume"})," driver features support you to store data on remote hosts or cloud storage easily."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Volume"})," on Docker Desktop have much higher performance than bind mount from Mac and Windows hosts."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Let's look at some use cases that leverage volume ",(0,a.jsx)(n.strong,{children:"driver"})," features"]}),"\n",(0,a.jsx)(n.h2,{id:"use-a-volume-to-bind-a-local-folder",children:"Use a volume to bind a local folder"}),"\n",(0,a.jsxs)(n.p,{children:["In default, the volume is created by Docker and its corresponding folder resides in Docker managed folder like ",(0,a.jsx)(n.code,{children:"/var/lib/docker/volumes/"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"$ docker create volume xxx\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'$ docker volume inspect xxx\n[\n    {\n        "CreatedAt": "2024-07-19T14:41:18+08:00",\n        "Driver": "local",\n        "Labels": {},\n        "Mountpoint": "/var/lib/docker/volumes/xxx/_data",\n        "Name": "xxx",\n        "Options": {},\n        "Scope": "local"\n    }\n]\n'})}),"\n",(0,a.jsxs)(n.p,{children:["However, sometimes you would like to bind the volume into a specified local folder(like ",(0,a.jsx)(n.code,{children:"/data/volumes/testvol"}),") in hosts(only available in ",(0,a.jsx)(n.code,{children:"Linux"}),")"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"$ docker volume create --opt type=none --opt o=bind --opt device=/data/volumes/testvol testvol\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'$ docker inspect testvol\n[\n    {\n        "CreatedAt": "2024-07-13T04:36:16Z",\n        "Driver": "local",\n        "Labels": {},\n        "Mountpoint": "/var/lib/docker/volumes/testvol/_data",\n        "Name": "testvol",\n        "Options": {\n            "device": "/data/volumes/testvol",\n            "o": "bind",\n            "type": "none"\n        },\n        "Scope": "local"\n    }\n'})}),"\n",(0,a.jsx)(n.p,{children:"In Docker compose yaml,"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yml",children:"services:\n  frontend:\n    image: node:lts\n    volumes:\n      - testvol:/home/node/app\nvolumes:\n  db-data:\n  testvol:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /data/volumes/testvol\n"})}),"\n",(0,a.jsx)(n.h2,{id:"use-nfs-volume",children:"Use NFS volume"}),"\n",(0,a.jsx)(n.h2,{id:"use-samba-volume",children:"Use Samba volume"}),"\n",(0,a.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://docs.docker.com/storage/volumes/#share-data-between-machines",children:"Volumes | Docker Documentation"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>i});var s=o(96540);const a={},r=s.createContext(a);function t(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},95894:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/types-of-mounts-volume-866cf680c6d400c46bf73612cf43fcd2.png"}}]);