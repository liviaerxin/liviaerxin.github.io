"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8605],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(96540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},89670:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"practice/python-c-library","title":"Python C Library","description":"Python C","source":"@site/../../docs/practice/python-c-library.mdx","sourceDirName":"practice","slug":"/practice/python-c-library","permalink":"/docs/practice/python-c-library","draft":false,"unlisted":false,"editUrl":"https://github.com/liviaerxin/liviaerxin.github.io/edit/main/_ssg/docusaurus/../../docs/practice/python-c-library.mdx","tags":[{"inline":true,"label":"Python","permalink":"/docs/tags/python"},{"inline":true,"label":"C","permalink":"/docs/tags/c"},{"inline":true,"label":"C++","permalink":"/docs/tags/c"},{"inline":true,"label":"Shared library","permalink":"/docs/tags/shared-library"},{"inline":true,"label":"Dynamic library","permalink":"/docs/tags/dynamic-library"}],"version":"current","lastUpdatedBy":"liviaerxin","lastUpdatedAt":1751185884000,"frontMatter":{"authors":["frank"],"tags":["Python","C","C++","Shared library","Dynamic library"],"description":"Python C","keywords":["Python C"],"image":"https://i.imgur.com/mErPwqL.png","date":"2024-12-18T00:00:00.000Z","draft":false,"enableComments":true},"sidebar":"docs","previous":{"title":"Python Benchmark","permalink":"/docs/practice/python-benchmark"},"next":{"title":"Celery","permalink":"/docs/practice/python-celery"}}');var t=i(74848),s=i(28453);const o={authors:["frank"],tags:["Python","C","C++","Shared library","Dynamic library"],description:"Python C",keywords:["Python C"],image:"https://i.imgur.com/mErPwqL.png",date:new Date("2024-12-18T00:00:00.000Z"),draft:!1,enableComments:!0},a="Python C Library",l={},c=[{value:"Python <code>int</code> object",id:"python-int-object",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"python-c-library",children:"Python C Library"})}),"\n",(0,t.jsx)(n.p,{children:"How many ways Python can interact with C libraries?"}),"\n",(0,t.jsx)(n.p,{children:"Two. There are two different modes totally."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ctypes"})," to load any dynamic library from a C libraries"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"import module"})," to import a dynamic library written using the Python C API"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Let's clarify the terminology a bit:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ctypes"})," to Load Dynamic Libraries (including any C library):"]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ctypes"})," is a foreign function interface (FFI) library in Python that allows you to call functions from dynamic/shared libraries written in languages like C."]}),"\n",(0,t.jsx)(n.li,{children:"It can be used to load and call functions from C libraries (or any dynamic/shared libraries), and it's a more manual, low-level approach to interfacing with C code."}),"\n",(0,t.jsxs)(n.li,{children:["Example with ",(0,t.jsx)(n.code,{children:"ctypes"}),":"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"import module"})," for Dynamic Libraries written in Python C API:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["If a C library is written using the Python C API and compiled as a Python extension module (",(0,t.jsx)(n.code,{children:".pyd"})," on Windows or ",(0,t.jsx)(n.code,{children:".so"})," on Unix-like systems), you can use the import statement to ",(0,t.jsx)(n.code,{children:"import"})," and use it in Python."]}),"\n",(0,t.jsxs)(n.li,{children:["This ",(0,t.jsx)(n.code,{children:"Pythonic"})," approach typically provides a more seamless integration as it allows the C code to be treated as a native Python module."]}),"\n",(0,t.jsxs)(n.li,{children:["Example with ",(0,t.jsx)(n.code,{children:"import module"}),":"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["What's the file's name that Python look for when using ",(0,t.jsx)(n.code,{children:"import module"})," to import C API libraries?"]}),"\n",(0,t.jsxs)(n.p,{children:["Python will look for a shared library with a suitable name, as determined by the platform conventions.\nThe shared library could be named something like ",(0,t.jsx)(n.code,{children:"libexample.so"})," on Unix-like systems or ",(0,t.jsx)(n.code,{children:"example.dll"})," on Windows. The ",(0,t.jsx)(n.code,{children:"PyInit_example"})," function initializes the module."]}),"\n",(0,t.jsxs)(n.h2,{id:"python-int-object",children:["Python ",(0,t.jsx)(n.code,{children:"int"})," object"]}),"\n",(0,t.jsx)(n.p,{children:"Python uses a variable-size integer representation,"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Overhead size"}),": 24 bytes, including Python header object"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Data size"}),": 4 or 8 bytes, storing smaller ",(0,t.jsx)(n.code,{children:"int"})," using 4 bytes and bigger ",(0,t.jsx)(n.code,{children:"int"})," using 8 bytes."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:">>> sys.getsizeof(0x560f7ab1e1c0)\n32\n>>> sys.getsizeof(0xc0)\n28\n"})}),"\n",(0,t.jsx)(n.h2,{id:"resources",children:"Resources"})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);